(function() {
    var apiKey = null; // APIキーを保持する変数
    var iframe = document.createElement('iframe');
    iframe.setAttribute('src', 'https://bettergpt.chat');
    iframe.style.position = 'fixed';
    iframe.style.top = '50%';
    iframe.style.left = '50%';
    iframe.style.transform = 'translate(-50%, -50%)';
    iframe.style.border = 'none'; // 枠線を削除
    iframe.style.boxShadow = '0px 0px 20px rgba(0, 0, 0, 0.2)'; // 影の追加
    iframe.style.width = '70%';
    iframe.style.height = '80%';
    iframe.style.zIndex = '9999';
    iframe.style.overflow = 'hidden'; // スクロールバーを非表示

    document.body.appendChild(iframe);

    // 初回のプロンプト表示
    if (!apiKey) {
        apiKey = prompt('Please enter your API key:');
    }

    iframe.contentWindow.addEventListener('load', function() {
        // iframe内部のウィンドウが読み込まれたら、APIキーを渡して通信を行う
        iframe.contentWindow.postMessage(apiKey, 'https://bettergpt.chat');
    });

    alert('Made by RandumbGuy#6414! Please copy this and put into your custom api endpoint https://free.churchless.tech/v1/chat/completions');
})();
